<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verificering</title>
  <link rel="stylesheet" href="../styles/style.css">
</head>
<body>
<img class="nærboks__logo" src="../media/Nærboks_logo.svg" alt="nærboks logo">

<main class="container">
    <img class="lock" src="../media/open-lock.svg" alt="Open lock">
    <section class="inputtext">
        <h2>Indtast verificeringskoden</h2>
        <p>Vi har koden den til +4526249007</p>
        <p class="p --margin">Indtast nedenfor</p>
    </section>
    <section>
        <article class="inputcontainer">
            <input type="tel" class="digitinput"  id="first-input" value="" maxlength="1">
            <input type="tel" class="digitinput"  id="second-input" value="" maxlength="1">
            <input type="tel" class="digitinput"  id="third-input" maxlength="1">
            <input type="tel" class="digitinput"  id="fourth-input" maxlength="1">
        </article>
    </section>
        <button class="authenticator --active">
            <div class="col-3">
                <div class="snippet" data-title=".dot-typing">
                    <div class="stage">
                        <div class="dot-typing"></div>
                    </div>
                </div>
            </div>
        </button>
</main>
<script>
    var container = document.getElementsByClassName("inputcontainer")[0];
    var last = document.getElementById("fourth-input");

    container.addEventListener("keyup", function(e){
        var target = e.srcElement || e.target;
        var maxlength = parseInt(target.attributes["maxlength"].value, 10);
        var mylenght = target.value.length;

        if(mylenght == maxlength){
            var next = target;
            while(next = next.nextElementSibling){
                if(next == null) break;
                if(next.tagName.toLowerCase() === "input"){
                    next.focus();
                    break;
                }
            }

            if(document.activeElement === last){
                if(last.value != ""){
                    window.location.href = "start.html";

                }
            }
        }else if(mylength === 0){
            var prev = target;
            while(prev = prev.previousElementSibling){
                if(prev == null) break;
                if(prev.tagName.toLowerCase === "null"){
                    prev.focus;
                    break;
                }
            }
        }
    })
</script>
</body>
</html>
